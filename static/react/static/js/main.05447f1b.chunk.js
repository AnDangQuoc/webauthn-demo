(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{114:function(e,t,n){"use strict";(function(e){var r=n(59),a=n.n(r),o=n(81),i=n(115),s=n(116),c=n(55),l=n(138),u=n(118),m=n(0),f=n.n(m),h=n(140),p=n(74),d=n(46),g=n(92),b=n(60),y=n(120),v=(n(154),n(122)),w=n.n(v),E=n(83),C=n(84),j=h.a.TabPane,O={labelCol:{span:8},wrapperCol:{span:16}},k={wrapperCol:{offset:8,span:16}},A=function(t){Object(u.a)(r,t);var n=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return(e=n.call.apply(n,[this].concat(s))).state={options:{},user:{},response:null,challenge:""},e.handleRegister=function(){var t=Object(o.a)(a.a.mark((function t(n){var r,o,i,s,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.username,o=n.name,i=void 0===o?"auto":o,r&&i){t.next=4;break}return alert("Name or username is missing!"),t.abrupt("return");case 4:return e.setState({}),Object(c.a)(e),s=e.createWebauthConfig(r,i),t.prev=7,t.next=10,navigator.credentials.create(s);case 10:l=t.sent,console.log(l),e.setState({response:l}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),p.b.error(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLogin=function(t){var n=t.username;if(n){var r=Object(c.a)(e);Object(E.a)({username:n}).then((function(e){console.log(e);var t=Object(C.a)(e);return r.setState({options:{publicKey:t}}),window.navigator.credentials.get({publicKey:t})})).then((function(e){console.log();var t=Object(C.b)(e);return Object(E.b)(t)})).then((function(e){p.b.success("OK"),console.log(e)})).catch((function(e){return alert(e)}))}else p.b.error("Username is missing!")},e.getCommand=function(e){return{echo:{description:"Echo a passed string.",usage:"echo",fn:function(){return JSON.stringify(e)}}}},e}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();case 2:(t=e.sent)||p.b.error("Webauthnn not support"),console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createWebauthConfig",value:function(t,n){var r=e.alloc(32),a={publicKey:{challenge:r,rp:{name:"webauthnplay.herokuapp.com"},user:{id:e.alloc(32,1),name:t,displayName:n},attestation:"direct",pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{authenticatorAttachment:"platform"}}};return this.setState({challenge:r,user:{id:e.alloc(32),name:t,displayName:n},options:a}),a}},{key:"createWebauthGetConfig",value:function(){var e=this.state,t=e.challenge;e.user,e.response;return{publicKey:{challenge:t,allowCredintails:[{type:"public-key",id:"test",transports:["internal"]}]}}}},{key:"render",value:function(){var e=this.state,t=e.options,n=e.user,r=e.response,a=e.challenge,o=this.getCommand(a);return f.a.createElement("div",{className:"card-container"},f.a.createElement(h.a,{type:"card"},f.a.createElement(j,{tab:"Register",key:"1"},f.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},f.a.createElement(d.a,Object.assign({onFinish:this.handleRegister},O,{id:"form_register"}),f.a.createElement(d.a.Item,{label:"User Name",name:"username",rules:[{required:!0,message:"Please input your username!"}]},f.a.createElement(g.a,null)),f.a.createElement(d.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},f.a.createElement(g.a,null)),f.a.createElement(d.a.Item,k,f.a.createElement(b.a,{type:"primary",htmlType:"submit",form:"form_register"},"Register"))))),f.a.createElement(j,{tab:"Login",key:"2"},f.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},f.a.createElement(d.a,{onFinish:this.handleLogin,id:"form_update"},f.a.createElement(d.a.Item,{label:"User Name",name:"username",rules:[{required:!0,message:"Please input your username!"}]},f.a.createElement(g.a,null)),f.a.createElement(d.a.Item,k,f.a.createElement(b.a,{type:"primary",htmlType:"submit",form:"form_update"},"Login")))))),r?f.a.createElement(y.a,{value:{options:t,user:n,challenge:a,response:r}}):f.a.createElement("div",null),f.a.createElement(w.a,{commands:o,welcomeMessage:"Welcome to the React terminal!",promptLabel:"me@React:~$"}))}}]),r}(f.a.Component);t.a=A}).call(this,n(94).Buffer)},141:function(e,t,n){e.exports=n(275)},147:function(e,t,n){},275:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(11),i=n.n(o),s=(n(146),n(147),n(114));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(s.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,n){"use strict";function r(e){return fetch("/webauthn/response",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}function a(e){return fetch("/webauthn/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}))},84:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(85);function a(e){if(e instanceof Array){var t,n=[],o=Object(r.a)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;n.push(a(i))}}catch(l){o.e(l)}finally{o.f()}return n}if(e instanceof ArrayBuffer)return function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;var a,o=new Uint8Array(e),i=o.length,s="";for(a=0;a<i;a+=3)s+=t[o[a]>>2],s+=t[(3&o[a])<<4|o[a+1]>>4],s+=t[(15&o[a+1])<<2|o[a+2]>>6],s+=t[63&o[a+2]];i%3===2?s=s.substring(0,s.length-1):i%3===1&&(s=s.substring(0,s.length-2));return s}(e);if(e instanceof Object){var s={};for(var c in e)s[c]=a(e[c]);return s}return e}function o(e){e.challenge=i(e.challenge);var t,n=Object(r.a)(e.allowCredentials);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.id=i(a.id)}}catch(o){n.e(o)}finally{n.f()}return e}function i(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;var a,o,i,s,c,l=.75*e.length,u=e.length,m=0,f=new Uint8Array(l);for(a=0;a<u;a+=4)o=n[e.charCodeAt(a)],i=n[e.charCodeAt(a+1)],s=n[e.charCodeAt(a+2)],c=n[e.charCodeAt(a+3)],f[m++]=o<<2|i>>4,f[m++]=(15&i)<<4|s>>2,f[m++]=(3&s)<<6|63&c;return f.buffer}}},[[141,1,2]]]);
//# sourceMappingURL=main.05447f1b.chunk.js.map