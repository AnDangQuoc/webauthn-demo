(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{107:function(e,n,t){"use strict";(function(e){var r=t(78),a=t.n(r),i=t(108),o=t(109),c=t(110),s=t(53),u=t(129),l=t(112),f=t(0),m=t.n(f),h=t(131),d=t(51),p=t(44),b=t(87),g=t(59),y=t(57),v=t(58),w=h.a.TabPane,O={labelCol:{span:8},wrapperCol:{span:16}},j={wrapperCol:{offset:8,span:16}},E=function(n){Object(l.a)(r,n);var t=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={options:{}},e.handleRegister=function(n){var t=n.username,r=n.name,a=void 0===r?"auto":r;if(t&&a){var i=Object(s.a)(e);Object(y.b)({username:t,name:a}).then((function(e){var n=Object(v.b)(e);return i.setState({options:{publicKey:n}}),window.navigator.credentials.create({publicKey:n})})).then((function(e){var n=Object(v.c)(e);return Object(y.c)(n)})).then((function(e){d.b.success("ok")})).catch((function(e){return alert(e)}))}else alert("Name or username is missing!")},e.handleLogin=function(n){var t=n.username;if(t){var r=Object(s.a)(e);Object(y.a)({username:t}).then((function(e){console.log(e);var n=Object(v.a)(e);return r.setState({options:{publicKey:n}}),window.navigator.credentials.get({publicKey:n})})).then((function(e){console.log();var n=Object(v.c)(e);return Object(y.c)(n)})).then((function(e){d.b.success("OK"),console.log(e)})).catch((function(e){return alert(e)}))}else d.b.error("Username is missing!")},e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var n=Object(i.a)(a.a.mark((function n(){var t;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.PublicKeyCredential){n.next=4;break}return d.b.error("FCCCCC"),e.PublicKeyCredential||d.b.error("KKKKKKKKK"),n.abrupt("return");case 4:return n.next=6,window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();case 6:(t=n.sent)||d.b.error("Webauthnn not support"),console.log(t);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.options;return m.a.createElement("div",{className:"card-container"},m.a.createElement(h.a,{type:"card"},m.a.createElement(w,{tab:"Register",key:"1"},m.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},m.a.createElement(p.a,Object.assign({onFinish:this.handleRegister},O,{id:"form_register"}),m.a.createElement(p.a.Item,{label:"User Name",name:"username",rules:[{required:!0,message:"Please input your username!"}]},m.a.createElement(b.a,null)),m.a.createElement(p.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},m.a.createElement(b.a,null)),m.a.createElement(p.a.Item,j,m.a.createElement(g.a,{type:"primary",htmlType:"submit",form:"form_register"},"Register")),m.a.createElement("p",null,JSON.stringify(e))))),m.a.createElement(w,{tab:"Login",key:"2"},m.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},m.a.createElement(p.a,{onFinish:this.handleLogin,id:"form_update"},m.a.createElement(p.a.Item,{label:"User Name",name:"username",rules:[{required:!0,message:"Please input your username!"}]},m.a.createElement(b.a,null)),m.a.createElement(p.a.Item,j,m.a.createElement(g.a,{type:"primary",htmlType:"submit",form:"form_update"},"Login")),m.a.createElement("p",null,JSON.stringify(e)))))))}}]),r}(m.a.Component);n.a=E}).call(this,t(60))},132:function(e,n,t){e.exports=t(247)},138:function(e,n,t){},247:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(11),o=t.n(i),c=(t(137),t(138),t(107));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(c.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,n,t){"use strict";function r(e){return fetch("/webauthn/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}function a(e){return fetch("/webauthn/response",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}function i(e){return fetch("/webauthn/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}))},58:function(e,n,t){"use strict";t.d(n,"c",(function(){return a})),t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return o}));var r=t(80);function a(e){if(e instanceof Array){var n,t=[],i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.push(a(o))}}catch(u){i.e(u)}finally{i.f()}return t}if(e instanceof ArrayBuffer)return function(e){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t=new Uint8Array(256),r=0;r<n.length;r++)t[n.charCodeAt(r)]=r;var a,i=new Uint8Array(e),o=i.length,c="";for(a=0;a<o;a+=3)c+=n[i[a]>>2],c+=n[(3&i[a])<<4|i[a+1]>>4],c+=n[(15&i[a+1])<<2|i[a+2]>>6],c+=n[63&i[a+2]];o%3===2?c=c.substring(0,c.length-1):o%3===1&&(c=c.substring(0,c.length-2));return c}(e);if(e instanceof Object){var c={};for(var s in e)c[s]=a(e[s]);return c}return e}function i(e){return e.challenge=c(e.challenge),e.user.id=c(e.user.id),e}function o(e){e.challenge=c(e.challenge);var n,t=Object(r.a)(e.allowCredentials);try{for(t.s();!(n=t.n()).done;){var a=n.value;a.id=c(a.id)}}catch(i){t.e(i)}finally{t.f()}return e}function c(e){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t=new Uint8Array(256),r=0;r<n.length;r++)t[n.charCodeAt(r)]=r;var a,i,o,c,s,u=.75*e.length,l=e.length,f=0,m=new Uint8Array(u);for(a=0;a<l;a+=4)i=t[e.charCodeAt(a)],o=t[e.charCodeAt(a+1)],c=t[e.charCodeAt(a+2)],s=t[e.charCodeAt(a+3)],m[f++]=i<<2|o>>4,m[f++]=(15&o)<<4|c>>2,m[f++]=(3&c)<<6|63&s;return m.buffer}}},[[132,1,2]]]);
//# sourceMappingURL=main.1ac4c2be.chunk.js.map