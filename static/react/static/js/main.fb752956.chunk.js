(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{111:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11),a=n(107),i=n.n(a);function o(e){if(e instanceof Array){var t,n=[],a=Object(r.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;n.push(o(c))}}catch(l){a.e(l)}finally{a.f()}return n}if(e instanceof ArrayBuffer)return i.a.encode(e);if(e instanceof Object){var s={};for(var u in e)s[u]=o(e[u]);return s}return e}},152:function(e,t,n){"use strict";function r(e){return fetch("/webauthn/register/v2",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}function a(e){return fetch("/webauthn/login/v2",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}))},190:function(e,t,n){"use strict";(function(e){var r=n(14),a=n.n(r),i=n(40),o=n(3),c=n(4),s=n(125),u=n(133),l=n(126),f=n(2),d=n.n(f),m=n(212),p=n(94),h=n(80),b=n(158),y=n(112),g=n(150),v=(n(225),n(226),n(78),n(73)),w=n(54),E=n(107),O=n.n(E),j=n(152),C=n(111),D=m.a.TabPane,S={labelCol:{span:8},wrapperCol:{span:16}},I={wrapperCol:{offset:8,span:16}},k=function(t){Object(l.a)(r,t);var n=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return(e=n.call.apply(n,[this].concat(c))).state={options:{},user:{},response:null,challenge:"",getResponse:null,clientData:{}},e.handleRegister=function(){var t=Object(i.a)(a.a.mark((function t(n){var r,i,o,c,u,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.username,i=n.name,o=void 0===i?"auto":i,r&&o){t.next=4;break}return alert("Name or username is missing!"),t.abrupt("return");case 4:return e.setState({}),Object(s.a)(e),c=e.createWebauthConfig(r,o),t.prev=7,t.next=10,navigator.credentials.create(c);case 10:return u=t.sent,l=Object(C.a)(u),t.next=14,Object(j.b)({username:r,name:o,publicKeyCredential:l});case 14:e.setState({response:l}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(7),p.b.error(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[7,17]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLogin=function(){var t=Object(i.a)(a.a.mark((function t(n){var r,i,o,c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.username2,e.state.attestation,r){t.next=5;break}return p.b.error("Username is missing!"),t.abrupt("return");case 5:return i=e.createWebauthGetConfig(),t.prev=6,t.next=9,navigator.credentials.get(i);case 9:return o=t.sent,c=Object(C.a)(o),t.next=13,Object(j.a)({username:r,publicKeyCredential:c});case 13:s=t.sent,e.setState({getResponse:Object(C.a)(o)}),s.result?p.b.success("Verified"):p.b.error("Not Verified"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),p.b.error(t.t0.message);case 21:case"end":return t.stop()}}),t,null,[[6,18]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var t=Object(i.a)(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();case 2:t.sent||p.b.error("Webauthnn not support"),n=new Uint8Array(32),r=new Uint8Array(32),crypto.getRandomValues(n),crypto.getRandomValues(r),this.setState({challenge:n,userId:r}),window.parseAttestationObject=v.a,window.parseCredentials=v.d,window.parseAuthenticatorData=v.b,window.publicKeyCredentialToJSON=C.a,window.base64url=O.a,window.derToPem=w.b,window.dev=crypto,window.buff=e;case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"createWebauthConfig",value:function(e,t){var n=this.state,r=n.challenge,a=n.userId,i={publicKey:{challenge:r,rp:{name:"Webauthn Play",id:"webauthnplay.herokuapp.com"},user:{id:a,name:e,displayName:t},attestation:"direct",authenticatorSelection:{authenticatorAttachment:"platform"},pubKeyCredParams:[{type:"public-key",alg:-7}]}};return this.setState({challenge:r,user:{id:a,name:e,displayName:t},options:i}),i}},{key:"createWebauthGetConfig",value:function(){var e=this.state,t=e.challenge,n=(e.user,e.response);if(n)return{publicKey:{challenge:t,allowCredentials:[{type:"public-key",id:O.a.toBuffer(n.rawId),transports:["usb","ble","nfc","internal"]}]}}}},{key:"render",value:function(){var e=this.state,t=e.response,n=e.getResponse;return d.a.createElement("div",{className:"card-container"},d.a.createElement(m.a,{type:"card"},d.a.createElement(D,{tab:"Register",key:"1"},d.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},d.a.createElement(h.a,Object.assign({onFinish:this.handleRegister},S,{id:"form_register"}),d.a.createElement(h.a.Item,{label:"User Name",name:"username",rules:[{required:!0,message:"Please input your username!"}]},d.a.createElement(b.a,null)),d.a.createElement(h.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},d.a.createElement(b.a,null)),d.a.createElement(h.a.Item,I,d.a.createElement(y.a,{type:"primary",htmlType:"submit",form:"form_register"},"Register"))))),d.a.createElement(D,{tab:"Login",key:"2"},d.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},d.a.createElement(h.a,{onFinish:this.handleLogin,id:"form_update"},d.a.createElement(h.a.Item,{label:"User Name",name:"username2",rules:[{required:!0,message:"Please input your username!"}]},d.a.createElement(b.a,null)),d.a.createElement(h.a.Item,I,d.a.createElement(y.a,{type:"primary",htmlType:"submit",form:"form_update"},"Login")))))),t?d.a.createElement("div",null," ",d.a.createElement("p",null,"Create Credential Response")," ",d.a.createElement("br",null),d.a.createElement(g.a,{value:{raw:t}})):d.a.createElement("div",null),n?d.a.createElement("div",null,d.a.createElement("p",null,"Get Credential Response")," ",d.a.createElement("br",null),d.a.createElement(g.a,{value:{raw:n}})):d.a.createElement("div",null))}}]),r}(d.a.Component);t.a=k}).call(this,n(23).Buffer)},194:function(e,t,n){"use strict";t.a={"1.2.840.113549.1.1.11":"sha256WithRSAEncryption"}},213:function(e,t,n){e.exports=n(389)},219:function(e,t,n){},248:function(e,t){},250:function(e,t){},281:function(e,t){},389:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(20),o=n.n(i),c=(n(218),n(219),n(190));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(c.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u}));n(38);var r=n(11),a=(n(194),n(0),n(209),n(78));function i(e){var t={};for(var n in e){var r=e[n];"object"===typeof r?Array.isArray(r)||r instanceof ArrayBuffer||r&&"length"in r?t[n]=r.slice():t[n]=i(r):t[n]=r}return t}function o(e,t){var n,a={},i=Object(r.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o in e&&(a[o]=e[o])}}catch(c){i.e(c)}finally{i.f()}return a}function c(e,t){Object.keys(e).forEach((function(n){n in t&&(e[n]=t[n].transform(e[n])),"object"===typeof e[n]&&c(e[n],t)}))}function s(t){for(var n=e.from(t).toString("base64"),r="",a=0;a<n.length;++a)r+=a%64===0?"\r\n".concat(n[a]):n[a];return"-----BEGIN CERTIFICATE-----"+"".concat(r,"\r\n")+"-----END CERTIFICATE-----"}function u(e){return JSON.stringify(e,null,2)}new(n.n(a).a.Encoder)({genTypes:[ArrayBuffer,function(t,n){return t.pushAny(e.from(n))}]})}).call(this,n(23).Buffer)},73:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d}));n(11);var r=n(54),a=n(93),i=n(78),o=n.n(i),c=n(151),s=n.n(c);function u(t){for(var n=t instanceof ArrayBuffer?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),r=0,a={rpIdHash:""},i=r+32;r<i;++r)a.rpIdHash+=n.getUint8(r).toString(16);var c=n.getUint8(r++);if(a.flags={userPresent:0!==(1&c),reserved1:0!==(2&c),userVerified:0!==(4&c),reserved2:((56&c)>>>3).toString(16),attestedCredentialData:0!==(64&c),extensionDataIncluded:0!==(128&c)},a.signCount=n.getUint32(r,!1),r+=4,a.flags.attestedCredentialData){var u={};a.attestedCredentialData=u,u.aaguid="";for(var l=r+16;r<l;++r)u.aaguid+=n.getUint8(r).toString(16);u.credentialIdLength=n.getUint16(r,!1),r+=2,u.credentialId="";for(var f=r+u.credentialIdLength;r<f;++r)u.credentialId+=n.getUint8(r).toString(16);try{var d=e.from(n.buffer,n.byteOffset+r);u.credentialPublicKey=o.a.encode(o.a.decodeFirstSync(d))}catch(m){s.a.error("Failed to decode CBOR data: ",m),u.credentialPublicKey="Decode error: ".concat(m.toString())}}return a.flags.extensionDataIncluded,a}function l(t){var n=t instanceof ArrayBuffer?e.from(t):e.from(t.buffer,t.byteOffset,t.byteLength);try{var r=o.a.decodeFirstSync(n);return r.authData&&(r.authData=u(r.authData)),r}catch(i){var a="Failed to decode attestationObject, unknown attestation type?";return s.a.error(a),a}}function f(e){var t=new TextDecoder("utf-8").decode(e);return JSON.parse(t)}function d(e){var t=Object(r.a)(e),n=Object(r.c)(a.a,["clientDataJSON","authenticatorData","attestationObject"]);return Object(r.e)(t,n),t}}).call(this,n(23).Buffer)},93:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(73),a=n(195);function i(t){if(!(t instanceof e))try{t=e.from(t)}catch(n){return""}return t.toString("hex")}var o={rawId:{transform:i,buttons:["Use","Download"]},sig:{transform:i,buttons:["Download"]},signature:{transform:i,buttons:["Download"]},userHandle:{transform:i,buttons:["Download"]},x5c:{transform:function(e){return e.map(i)},buttons:["View","Download PEM"]},credentialPublicKey:{transform:n.n(a).a,buttons:["Download COSE","Download JWK","Download PEM"]},authenticatorData:{transform:r.b},attestationObject:{transform:r.a},clientDataJSON:{transform:r.c}}}).call(this,n(23).Buffer)}},[[213,1,2]]]);
//# sourceMappingURL=main.fb752956.chunk.js.map