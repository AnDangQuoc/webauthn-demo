(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{101:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u}));n(11),n(63),n(90);var r=n(88),a=n.n(r),o=n(142),i=n.n(o);function c(t){for(var n=t instanceof ArrayBuffer?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),r=0,o={rpIdHash:""},c=r+32;r<c;++r)o.rpIdHash+=n.getUint8(r).toString(16);var s=n.getUint8(r++);if(o.flags={userPresent:0!==(1&s),reserved1:0!==(2&s),userVerified:0!==(4&s),reserved2:((56&s)>>>3).toString(16),attestedCredentialData:0!==(64&s),extensionDataIncluded:0!==(128&s)},o.signCount=n.getUint32(r,!1),r+=4,o.flags.attestedCredentialData){var u={};o.attestedCredentialData=u,u.aaguid="";for(var f=r+16;r<f;++r)u.aaguid+=n.getUint8(r).toString(16);u.credentialIdLength=n.getUint16(r,!1),r+=2,u.credentialId="";for(var l=r+u.credentialIdLength;r<l;++r)u.credentialId+=n.getUint8(r).toString(16);try{var d=e.from(n.buffer,n.byteOffset+r);u.credentialPublicKey=a.a.encode(a.a.decodeFirstSync(d))}catch(m){i.a.error("Failed to decode CBOR data: ",m),u.credentialPublicKey="Decode error: ".concat(m.toString())}}return o.flags.extensionDataIncluded,o}function s(t){var n=t instanceof ArrayBuffer?e.from(t):e.from(t.buffer,t.byteOffset,t.byteLength);try{var r=a.a.decodeFirstSync(n);return r.authData&&(r.authData=c(r.authData)),r}catch(s){var o="Failed to decode attestationObject, unknown attestation type?";return i.a.error(o),o}}function u(e){var t=new TextDecoder("utf-8").decode(e);return JSON.parse(t)}}).call(this,n(24).Buffer)},179:function(e,t,n){"use strict";t.a={"1.2.840.113549.1.1.11":"sha256WithRSAEncryption"}},197:function(e,t,n){e.exports=n(361)},203:function(e,t,n){},215:function(e,t){},217:function(e,t){},247:function(e,t){},361:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(20),i=n.n(o),c=(n(202),n(203),n(14)),s=n.n(c),u=n(38),f=n(3),l=n(4),d=n(126),m=n(127),h=n(364),p=n(367),y=n(363),b=n(366),g=n(148),v=(n(204),n(208),n(101),n(118)),w=n.n(v);function O(e){return fetch("/webauthn/register/v2/init",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}function E(e){return fetch("/webauthn/register/v2",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}function C(e){return fetch("/webauthn/login/v2",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}function j(e){return fetch("/webauthn/verify/v2",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if("ok"!==e.status)throw new Error("Server responed with error. The message is: ".concat(e.message));return e}))}var k=n(11);function S(e){if(e instanceof Array){var t,n=[],r=Object(k.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(S(a))}}catch(c){r.e(c)}finally{r.f()}return n}if(e instanceof ArrayBuffer)return w.a.encode(e);if(e instanceof Object){var o={};for(var i in e)o[i]=S(e[i]);return o}return e}var x=h.a.TabPane,D={labelCol:{span:8},wrapperCol:{span:16}},A={wrapperCol:{offset:8,span:16}},I=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.handleRegister=function(){var t=Object(u.a)(s.a.mark((function t(n){var r,a,o,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.username,a=n.name,o=void 0===a?"auto":a,r&&o){t.next=4;break}return p.b.error("Name or username is missing!"),t.abrupt("return");case 4:return t.prev=4,t.next=7,O({username:r});case 7:return i=t.sent,c=e.createWebauthConfig(r,o,i.challenge,i.userId),t.abrupt("return",e.beginRegister(c,r,o));case 12:t.prev=12,t.t0=t.catch(4),p.b.error(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}(),e.beginRegister=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r){var a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.credentials.create(t);case 3:return a=e.sent,o=S(a),e.next=7,E({username:n,name:r,publicKeyCredential:o});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),e.handleLogin=function(){var t=Object(u.a)(s.a.mark((function t(n){var r,a,o,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.username2){t.next=4;break}return p.b.error("Username is missing!"),t.abrupt("return");case 4:return t.prev=4,t.next=7,C({username:r});case 7:return(a=t.sent).rawId||p.b.error("User Not Found"),o=e.createWebauthGetConfig(a.rawId,a.challenge),t.next=12,navigator.credentials.get(o);case 12:return i=t.sent,c=S(i),t.next=16,j({username:r,publicKeyCredential:c});case 16:t.sent.result?p.b.success("Verified"):p.b.error("Not Verified"),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(4),p.b.error(t.t0.message);case 23:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();case 2:e.sent||p.b.error("Webauthnn not support");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createWebauthConfig",value:function(e,t,n,r){return{publicKey:{challenge:Uint8Array.from(n,(function(e){return e.charCodeAt(0)})),rp:{name:"Webauthn Play",id:"webauthnplay.herokuapp.com"},user:{id:Uint8Array.from(r,(function(e){return e.charCodeAt(0)})),name:e,displayName:t},attestation:"direct",authenticatorSelection:{authenticatorAttachment:"platform"},pubKeyCredParams:[{type:"public-key",alg:-7}]}}}},{key:"createWebauthGetConfig",value:function(e,t){return{publicKey:{challenge:Uint8Array.from(t,(function(e){return e.charCodeAt(0)})),allowCredentials:[{type:"public-key",id:w.a.toBuffer(e),transports:["usb","ble","nfc","internal"]}]}}}},{key:"render",value:function(){return a.a.createElement("div",{className:"card-container"},a.a.createElement(h.a,{type:"card"},a.a.createElement(x,{tab:"Register",key:"1"},a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},a.a.createElement(y.a,Object.assign({onFinish:this.handleRegister},D,{id:"form_register"}),a.a.createElement(y.a.Item,{label:"User Name",name:"username",rules:[{required:!0,message:"Please input your username!"}]},a.a.createElement(b.a,null)),a.a.createElement(y.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},a.a.createElement(b.a,null)),a.a.createElement(y.a.Item,A,a.a.createElement(g.a,{type:"primary",htmlType:"submit",form:"form_register"},"Register"))))),a.a.createElement(x,{tab:"Login",key:"2"},a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},a.a.createElement(y.a,{onFinish:this.handleLogin,id:"form_update"},a.a.createElement(y.a.Item,{label:"User Name",name:"username2",rules:[{required:!0,message:"Please input your username!"}]},a.a.createElement(b.a,null)),a.a.createElement(y.a.Item,A,a.a.createElement(g.a,{type:"primary",htmlType:"submit",form:"form_update"},"Login")))))))}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s}));n(37);var r=n(11),a=(n(179),n(0),n(194),n(88));function o(e){var t={};for(var n in e){var r=e[n];"object"===typeof r?Array.isArray(r)||r instanceof ArrayBuffer||r&&"length"in r?t[n]=r.slice():t[n]=o(r):t[n]=r}return t}function i(e,t){var n,a={},o=Object(r.a)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;i in e&&(a[i]=e[i])}}catch(c){o.e(c)}finally{o.f()}return a}function c(e,t){Object.keys(e).forEach((function(n){n in t&&(e[n]=t[n].transform(e[n])),"object"===typeof e[n]&&c(e[n],t)}))}function s(e){return JSON.stringify(e,null,2)}new(n.n(a).a.Encoder)({genTypes:[ArrayBuffer,function(t,n){return t.pushAny(e.from(n))}]})}).call(this,n(24).Buffer)},90:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(101),a=n(180);function o(t){if(!(t instanceof e))try{t=e.from(t)}catch(n){return""}return t.toString("hex")}var i={rawId:{transform:o,buttons:["Use","Download"]},sig:{transform:o,buttons:["Download"]},signature:{transform:o,buttons:["Download"]},userHandle:{transform:o,buttons:["Download"]},x5c:{transform:function(e){return e.map(o)},buttons:["View","Download PEM"]},credentialPublicKey:{transform:n.n(a).a,buttons:["Download COSE","Download JWK","Download PEM"]},authenticatorData:{transform:r.b},attestationObject:{transform:r.a},clientDataJSON:{transform:r.c}}}).call(this,n(24).Buffer)}},[[197,1,2]]]);
//# sourceMappingURL=main.f11e0309.chunk.js.map